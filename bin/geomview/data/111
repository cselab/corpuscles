ps1fun () {
    awk -v d="`pwd`" \
    '
      BEGIN {
	m = 20
	n = length(d)
	pre = n > m ? "*" : ""
	print pre substr(d, n - m)
      }
    '
}
PS1='`ps1fun`$ '
